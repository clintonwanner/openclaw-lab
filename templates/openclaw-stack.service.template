[Unit]
Description=Ironclad OpenClaw Sandbox Stack
After=docker.service network-online.target
Wants=docker.service

[Service]
Type=oneshot
RemainAfterExit=yes
WorkingDirectory=<PROJECT_ROOT>
# Start the stack
ExecStart=/usr/bin/docker compose up -d
# Apply Security Moat (iptables) on boot/start
ExecStartPost=<PROJECT_ROOT>/apply_network_rules.sh
# Stop the stack
ExecStop=/usr/bin/docker compose down

[Install]
WantedBy=multi-user.target